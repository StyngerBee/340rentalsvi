<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Rentals - <!-- TODO: COMPANY NAME -->Company Name</title> <!-- ‚Üê placeholder -->
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
<header class="navbar">
  <div class="logo">üè† <!-- TODO: COMPANY NAME -->Company Name</div> <!-- ‚Üê placeholder -->
  <nav>
    <a href="index.html" class="btn">Home</a>
    <a href="contact.html" class="btn">Contact</a>
    <span id="userInfo" style="margin:0 .5rem; display:none;"></span>
    <a id="loginBtn" class="btn" href="#" onclick="startLogin(event)">Owner Login</a>
    <a id="logoutBtn" class="btn" href="#" onclick="startLogout(event)" style="display:none;">Logout</a>
  </nav>
</header>

<main class="content">
  <h1>Available Rentals</h1>

  <div class="filters">
    <input id="beds" type="number" placeholder="Min beds"/>
    <input id="baths" type="number" step="0.5" placeholder="Min baths"/>
    <input id="maxPrice" type="number" placeholder="Max price"/>
    <label class="chk"><input id="onlyAvail" type="checkbox"/> Only available</label>
    <button id="apply" class="btn">Apply</button>
    <button id="clear" class="btn">Clear</button>
  </div>

  <div id="grid" class="grid"></div>
</main>

<script src="script.js"></script>
<script>
document.addEventListener('DOMContentLoaded', async () => {
  const grid = document.getElementById('grid');
  function render(list){
    grid.innerHTML = list.map(p=>{
      const img = (p.images && p.images[0]) || '';
      return `
        <div class="card">
          <div class="carousel">${img ? `<img src="${img}" style="width:100%;height:auto;object-fit:cover;">` : '<div style="aspect-ratio:4/3;background:#eee;"></div>'}</div>
          <div class="card-body" style="padding:0.75rem 1rem;">
            <div class="title-row"><div style="font-weight:600;">${p.title}</div><div class="price">$${Number(p.price).toLocaleString()}</div></div>
            <div class="meta">${p.bedrooms} bd ‚Ä¢ ${p.bathrooms} ba ‚Ä¢ ${p.city || ''}</div>
            <div style="margin-top:4px;"><span class="status ${p.available?'available':'unavailable'}">${p.available?'Available':'Unavailable'}</span></div>
            <p style="font-size:14px;color:#555;margin:.5rem 0 0;">${p.description||''}</p>
          </div>
        </div>
      `;
    }).join('');
  }
  async function loadAndFilter(){
    const all = await api.getProperties({});
    const minBeds = Number(document.getElementById('beds').value)||0;
    const minBaths = Number(document.getElementById('baths').value)||0;
    const priceCap = Number(document.getElementById('maxPrice').value)||Infinity;
    const only = document.getElementById('onlyAvail').checked;
    const filtered = all.filter(p =>
      p.bedrooms>=minBeds && p.bathrooms>=minBaths && p.price<=priceCap && (!only || p.available)
    );
    render(filtered);
  }
  document.getElementById('apply').onclick = loadAndFilter;
  document.getElementById('clear').onclick = ()=>{
    beds.value=baths.value=maxPrice.value=''; onlyAvail.checked=false; loadAndFilter();
  };
  await loadAndFilter();
});
</script>
</body>
</html>
